{% comment %} 

  {% for link in linklists.main-menu.links %} 
    {% assign child_list_handle = link.title | handleize %} 
      {% if linklists[child_list_handle].links != blank %}
        <a href="{{ link.url }}">{{ link.title }}</a>
        [{% for childlink in linklists[child_list_handle].links %}
            <a href="{{ childlink.url }}">{{ childlink.title | escape }}</a>
        {% endfor %}] {% else %}
        <a href="{{ link.url }}">{{ link.title }}</a>
      {% endif %} 
  {% endfor %} 
  
{% if shop.customer_accounts_enabled %} 
  {% if customer %}
    <a href="/account">account</a>
    {{ "log out" | customer_logout_link }}
  {% else %}
    {{ "log in " | customer_login_link }}
    {{ "register" | customer_register_link }}
  {% endif %} 
{% endif %} 

{% endcomment %}


<header class="z-10 w-fill fixed inset-0 py-5 px-10 border-b border-gray-500 bg-white" style="height: min-content" id="header">
    <nav class="flex justify-between items-center">
        <div id="menu-modal">
            <button>
                <span>Menu</span>
            </button>
        </div>
    
        <a href="/">{{ shop.name }}</a>

        <button class="w-8 h-8 relative transition-all" title="shopping cart" id="cart-button">
          <svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-cart w-8 h-8 cart-icon"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
          <span class="text-xs font-medium absolute top-2 left-4 text-gray-700">${cartCount || ""}</span>
        </button>
    </nav>

    <div id="cart-modal">
      {% render 'cart-modal' %}
    </div>
</header>

<script>
  if (document.querySelector('#header')) {
    const header = Vue.createApp({
      delimiters: ["${", "}"],
      data() {
        return {
        }
      },
      created() {
        store.getCart();
      },
      computed: {
        cart() {
          return store.state.cart.items;
        },
        cartCount() {
          return this.cart.item_count;
        },
        isCartHidden() {
          return store.state.cart.hidden;
        },
        isMenuHidden() {
          return store.state.menu.hidden;
        }
      }
    }).mount('#header');
  }
</script>

<style scoped>
  .cart-icon {
    stroke: rgba(55, 65, 81, .9);
  }

  #cart-button::after {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-46%, -56%) scale(0);
    opacity: 0;
  }

  #cart-button:hover::after {
    content: "";
    height: 3.25rem;
    width: 3.25rem;
    border-radius: 50%;
    display: inline-block;
    animation: cart-hover .2s forwards;
  }

  @keyframes cart-hover {
    100% {
      background-color: rgba(55, 65, 81, .1);
      box-shadow: inset 0 0 8px rgba(55, 65, 81, .25);
      transform: translate(-46%, -56%) scale(1);
      opacity: 1;
    }
  }

</style>